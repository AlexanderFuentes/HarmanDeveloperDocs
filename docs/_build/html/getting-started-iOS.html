<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Started Guide (iOS) &mdash; Harman Developer 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Harman Developer 1.0 documentation" href="index.html" />
    <link rel="prev" title="Overview of HKWirelessHD SDK (iOS)" href="sdk-overview.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="sdk-overview.html" title="Overview of HKWirelessHD SDK (iOS)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Harman Developer 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-started-guide-ios">
<h1>Getting Started Guide (iOS)<a class="headerlink" href="#getting-started-guide-ios" title="Permalink to this headline">¶</a></h1>
<p>The Harman Kardon WirelessHD (HKWirelessHD) SDK is provided for iOS 3rd party developers to communicate with Harman/Kardon Omni Series audio/video devices. The intent of this SDK is to provide the tools and libraries necessary to build, test and deploy the latest audio applications on the iOS platform.</p>
<div class="section" id="what-you-need">
<h2>What You Need<a class="headerlink" href="#what-you-need" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>A SmartThings hub that has been configured. Some devices would be good too, but not required.</li>
<li>Experience with some form of programming. SmartThings uses the <a class="reference external" href="http://www.groovy-lang.org/">Groovy programming language</a>. You don&#8217;t need to be a Groovy Ninja, but some familiarity with programming is assumed.</li>
</ul>
</div>
<div class="section" id="what-we-will-build">
<h2>What We Will Build<a class="headerlink" href="#what-we-will-build" title="Permalink to this headline">¶</a></h2>
<p>We are going to build a SmartApp that turns on a light when a door opens.</p>
<p>Here&#8217;s the recipe for our app: <em>When a door opens, turn on a light. When the door closes, turn the light off.</em></p>
<p>Let&#8217;s build it!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The example app we&#8217;ll walk through here is discussed in greater detail in the <a class="reference external" href="introduction/introduction-to-the-ide/building-your-first-smartapp.html">Building Your First SmartApp</a> section of the <a class="reference external" href="introduction/index.html">Introduction</a>.</p>
</div>
</div>
<div class="section" id="walkthrough">
<h2>Walkthrough<a class="headerlink" href="#walkthrough" title="Permalink to this headline">¶</a></h2>
<div class="section" id="step-1-register-a-developer-account">
<h3>Step 1: Register a developer account<a class="headerlink" href="#step-1-register-a-developer-account" title="Permalink to this headline">¶</a></h3>
<p>If you haven&#8217;t already, <a class="reference external" href="https://graph.api.smartthings.com/register/developer">Register for a developer account</a></p>
</div>
<hr class="docutils" />
<div class="section" id="step-2-go-the-developer-environment-page">
<h3>Step 2: Go the developer environment page<a class="headerlink" href="#step-2-go-the-developer-environment-page" title="Permalink to this headline">¶</a></h3>
<p>Head over to the <a class="reference external" href="https://graph.api.smartthings.com">developer environment page</a>. This is where you can manage your hubs, devices, view logging, and more. We&#8217;re going to use the web-based IDE to create a SmartApp.</p>
</div>
<hr class="docutils" />
<div class="section" id="step-3-create-your-smartapp">
<h3>Step 3: Create your SmartApp<a class="headerlink" href="#step-3-create-your-smartapp" title="Permalink to this headline">¶</a></h3>
<p>Click on the &#8220;My SmartApps&#8221; link:</p>
<img alt="img/quick-start/dev_hub_smartapp_menu.png" src="img/quick-start/dev_hub_smartapp_menu.png" />
<p>This will take you to your SmartApps page, where you can view and manage your SmartApps. Press the &#8220;New SmartApp&#8221; button on the right of the page:</p>
<img alt="img/quick-start/ide_new_smartapp_button.png" src="img/quick-start/ide_new_smartapp_button.png" />
<p>Give your app a name, author, and description. Set the category to &#8220;My Apps&#8221;. Then click the &#8220;Create&#8221; button.</p>
<img alt="img/quick-start/new-smart-app-form.png" src="img/quick-start/new-smart-app-form.png" />
<p>This will take you to the IDE, where you will see some code has been filled in for you.</p>
<p>There are three core methods that must be defined for SmartApps:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">preferences</span></code> is where we configure what information we need from the user to run this app.</li>
<li><code class="docutils literal"><span class="pre">installed</span></code> is the method that is called when this app is installed. Typically this is where we subscribe to events from configured devices.</li>
<li><code class="docutils literal"><span class="pre">updated</span></code> is the method that is called when the preferences are updated. Typically just unsubscribes and re-subscribes to events, since the preferences have changed.</li>
</ul>
<p>Our example is going to be pretty simple - we will create an app that triggers a light to come on when a door opens.</p>
<p>At a high level, our app will need to:</p>
<ol class="arabic simple">
<li>Gather the devices (door and light) to use for this app</li>
<li>Monitor the door device - if it is opened, turn the light on. If it is closed, turn it off.</li>
</ol>
</div>
<hr class="docutils" />
<div class="section" id="step-4-fill-in-the-preferences-block">
<h3>Step 4: Fill in the preferences block<a class="headerlink" href="#step-4-fill-in-the-preferences-block" title="Permalink to this headline">¶</a></h3>
<p>The first thing we need to do is gather the sensors and switches we want this SmartApp to work with. We do this through the <code class="docutils literal"><span class="pre">preferences</span></code> definition.</p>
<p>In the IDE, replace the generated preferences block with the following:</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="n">preferences</span> <span class="o">{</span>
    <span class="c1">// What door should this app be configured for?</span>
    <span class="n">section</span> <span class="o">(</span><span class="s2">&quot;When the door opens/closes...&quot;</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">input</span> <span class="s2">&quot;contact1&quot;</span><span class="o">,</span> <span class="s2">&quot;capability.contactSensor&quot;</span><span class="o">,</span>
              <span class="nl">title:</span> <span class="s2">&quot;Where?&quot;</span>
    <span class="o">}</span>
    <span class="c1">// What light should this app be configured for?</span>
    <span class="n">section</span> <span class="o">(</span><span class="s2">&quot;Turn on/off a light...&quot;</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">input</span> <span class="s2">&quot;switch1&quot;</span><span class="o">,</span> <span class="s2">&quot;capability.switch&quot;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Click the &#8220;Save&#8221; button above the editor.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When interacting with devices, SmartApps should use capabilities to ensure maximum flexibility (that&#8217;s the &#8220;capability.contactSensor&#8221; above). The available capabilities can be found on the <span class="xref std std-ref">capabilities_taxonomy</span> page.</p>
<p class="last">More information about preferences can be found in the <a class="reference external" href="smartapp-developers-guide/preferences-and-settings.html">Preferences and Settings section</a> of the <a class="reference external" href="smartapp-developers-guide/index.html">SmartApp Developer&#8217;s Guide</a>.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="step-5-subscribe-to-events">
<h3>Step 5: Subscribe to events<a class="headerlink" href="#step-5-subscribe-to-events" title="Permalink to this headline">¶</a></h3>
<p>In the IDE, note that there is an empty <code class="docutils literal"><span class="pre">initialize</span></code> method defined for you. This method is called from both the <code class="docutils literal"><span class="pre">installed</span></code> and <code class="docutils literal"><span class="pre">updated</span></code> methods.</p>
<p>This is where we will subscribe to the device(s) we want to monitor. In our case, we want to know if the door opens or closes.</p>
<p>Replace the <code class="docutils literal"><span class="pre">initialize</span></code> method with this:</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="kt">def</span> <span class="nf">initialize</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">subscribe</span><span class="o">(</span><span class="n">contact1</span><span class="o">,</span> <span class="s2">&quot;contact&quot;</span><span class="o">,</span> <span class="n">contactHandler</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note the arguments to the subscribe method. The first argument, &#8220;contact1&#8221;, corresponds to the name in the preferences input for the contact sensor. This tells the SmartApp executor what input we are subscribing to. The second parameter, &#8220;contact&#8221;, is what value of the sensor we want to listen for. In this case, we use &#8220;contact&#8221; to listen to all value changes (open or closed). The third parameter, &#8220;contactHandler&#8221;, is the name of a method to call when the sensor has a state change. Let&#8217;s define that next!</p>
<p>(don&#8217;t forget to click the &#8220;Save&#8221; button!)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">More information about events and subscriptions can be found in the <a class="reference external" href="smartapp-developers-guide/simple-event-handler-smartapps.html">Events and Subscriptions section</a> of the <a class="reference external" href="smartapp-developers-guide/index.html">SmartApp Developer&#8217;s Guide</a>.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="step-6-define-the-event-handler">
<h3>Step 6: Define the event handler<a class="headerlink" href="#step-6-define-the-event-handler" title="Permalink to this headline">¶</a></h3>
<p>Add the following code to the bottom of your SmartApp:</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="c1">// event handlers are passed the event itself</span>
<span class="kt">def</span> <span class="nf">contactHandler</span><span class="o">(</span><span class="n">evt</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">log</span><span class="o">.</span><span class="na">debug</span> <span class="s2">&quot;$evt.value&quot;</span>

    <span class="c1">// The contactSensor capability can be either &quot;open&quot; or &quot;closed&quot;</span>
    <span class="c1">// If it&#39;s &quot;open&quot;, turn on the light!</span>
    <span class="c1">// If it&#39;s &quot;closed&quot; turn the light off.</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">evt</span><span class="o">.</span><span class="na">value</span> <span class="o">==</span> <span class="s2">&quot;open&quot;</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">switch1</span><span class="o">.</span><span class="na">on</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">evt</span><span class="o">.</span><span class="na">value</span> <span class="o">==</span> <span class="s2">&quot;closed&quot;</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">switch1</span><span class="o">.</span><span class="na">off</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Click the &#8220;Save&#8221; button, and let&#8217;s try it out!</p>
</div>
<hr class="docutils" />
<div class="section" id="step-7-run-it-in-the-simulator">
<h3>Step 7: Run it in the simulator<a class="headerlink" href="#step-7-run-it-in-the-simulator" title="Permalink to this headline">¶</a></h3>
<p>To the right of the editor in the IDE, you should see a &#8220;Location&#8221; field:</p>
<img alt="img/quick-start/ide-set-location.png" src="img/quick-start/ide-set-location.png" />
<p>Select the location of your hub (if you have only one hub, it will be selected by default), and click &#8220;Set Location&#8221;.</p>
<p>Now you can pick some devices if you have them, or create some virtual devices.</p>
<img alt="img/quick-start/ide-install-app.png" src="img/quick-start/ide-install-app.png" />
<p>Once you&#8217;ve picked some devices, click &#8220;Install&#8221; to launch the simulator:</p>
<img alt="img/quick-start/ide-simulator.png" src="img/quick-start/ide-simulator.png" />
<p>Try changing the contact sensor from closed to open - you should see the switch in the simulator turn on. If you used a real switch, you should see the light actually turn on or off!</p>
<p>Also note the log statements in the log console. Logging is extremely useful for debugging purposes.</p>
</div>
<hr class="docutils" />
<div class="section" id="bonus-step-publish-your-smartapp-for-you-only">
<h3>Bonus Step: Publish your SmartApp (for you only)<a class="headerlink" href="#bonus-step-publish-your-smartapp-for-you-only" title="Permalink to this headline">¶</a></h3>
<p>We&#8217;ve run our app in the simulator, which is a great way to test as we develop. But we can also publish our app so we
can use it from our smart phone, just like other SmartApps. Let&#8217;s walk through those steps.</p>
<p>On top of the IDE, there&#8217;s a &#8220;Publish&#8221; button right next to the Save button. Click it, and select &#8220;For me&#8221;:</p>
<img alt="img/quick-start/ide-publish-for-me.png" src="img/quick-start/ide-publish-for-me.png" />
<p>You should see a message indicating your app published successfully.</p>
<p>On your mobile phone, launch the SmartThings app, and go to the Dashboard. Towards the bottom, click the &#8220;+&#8221; icon:</p>
<img alt="img/quick-start/mobile-install-my-app.png" src="img/quick-start/mobile-install-my-app.png" />
<p>In the SmartSetup screen, scroll all the way to the right to select &#8220;My Apps&#8221;. You should see your app there - select it and you can install it just like any other SmartApp! (you&#8217;ll need physical devices to successfully install this app)</p>
<img alt="img/quick-start/mobile-myapps-install.png" src="img/quick-start/mobile-myapps-install.png" />
</div>
</div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>This tutorial has shown you how to set up a developer account, use the IDE to create a simple SmartApp, use the simulator to test your SmartApp, and publish your SmartApp to your mobile phone.</p>
<p>In addition to using this documentation, the best way to learn is by looking at existing code and writing your own. In the IDE, there are several templates that you can review. These are great sources for learning SmartThings development! In fact, the SmartApp we built borrows heavily from (OK, it&#8217;s a total clone) the &#8220;Let There Be Light&#8221; SmartApp.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting Started Guide (iOS)</a><ul>
<li><a class="reference internal" href="#what-you-need">What You Need</a></li>
<li><a class="reference internal" href="#what-we-will-build">What We Will Build</a></li>
<li><a class="reference internal" href="#walkthrough">Walkthrough</a><ul>
<li><a class="reference internal" href="#step-1-register-a-developer-account">Step 1: Register a developer account</a></li>
<li><a class="reference internal" href="#step-2-go-the-developer-environment-page">Step 2: Go the developer environment page</a></li>
<li><a class="reference internal" href="#step-3-create-your-smartapp">Step 3: Create your SmartApp</a></li>
<li><a class="reference internal" href="#step-4-fill-in-the-preferences-block">Step 4: Fill in the preferences block</a></li>
<li><a class="reference internal" href="#step-5-subscribe-to-events">Step 5: Subscribe to events</a></li>
<li><a class="reference internal" href="#step-6-define-the-event-handler">Step 6: Define the event handler</a></li>
<li><a class="reference internal" href="#step-7-run-it-in-the-simulator">Step 7: Run it in the simulator</a></li>
<li><a class="reference internal" href="#bonus-step-publish-your-smartapp-for-you-only">Bonus Step: Publish your SmartApp (for you only)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="sdk-overview.html"
                        title="previous chapter">Overview of HKWirelessHD SDK (iOS)</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/getting-started-iOS.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="sdk-overview.html" title="Overview of HKWirelessHD SDK (iOS)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Harman Developer 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Harman International.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>