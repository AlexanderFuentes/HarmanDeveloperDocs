<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Started Guide (iOS) &mdash; Harman Developer 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Harman Developer 1.0 documentation" href="index.html" />
    <link rel="next" title="Architecture Overview" href="architecture-overview.html" />
    <link rel="prev" title="Overview of HKWirelessHD SDK (iOS)" href="sdk-overview.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="architecture-overview.html" title="Architecture Overview"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="sdk-overview.html" title="Overview of HKWirelessHD SDK (iOS)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Harman Developer 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-started-guide-ios">
<h1>Getting Started Guide (iOS)<a class="headerlink" href="#getting-started-guide-ios" title="Permalink to this headline">¶</a></h1>
<p>HKWirelessHD SDK supports both Objective-C and Swift. This document assumes that developer creates his/her app using the Swift language.</p>
<p>In the section, we will use the HKPage app as an example.</p>
<div class="section" id="project-setup-with-hkwireless-normal-version">
<h2>Project Setup with HKWireless (normal version)<a class="headerlink" href="#project-setup-with-hkwireless-normal-version" title="Permalink to this headline">¶</a></h2>
<div class="section" id="include-hkwirelesshdsdk-into-your-project">
<h3>Include HKWirelessHDSDK into your project<a class="headerlink" href="#include-hkwirelesshdsdk-into-your-project" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add HKWirelessHDSDK to your project by dragging and dropping the HKWirelessHDSDK folder into the project navigator.</li>
<li>Select “Create groups”, and click finish. By doing this, the include header path for HKWirelessHD SDK is added to your project.</li>
<li>We need only the “include” folder, so you may remove the references to the other items in the folder. (Right click on any items you want to remove, select “Delete”, and then select “Remove References”.)</li>
</ul>
</div>
<div class="section" id="add-libhkwirelesshd-a-as-link-binary">
<h3>Add libHKWirelessHD.a as link binary<a class="headerlink" href="#add-libhkwirelesshd-a-as-link-binary" title="Permalink to this headline">¶</a></h3>
<ul>
<li><dl class="first docutils">
<dt>Project Setting &gt; Your Targets &gt; Build Phases &gt; Link Binary With Libraries</dt>
<dd><ul class="first last simple">
<li>Click &#8216;+&#8217;, and then click &#8220;Add Other...&#8221;</li>
<li>Find &#8216;libHKWirelessHD.a&#8217; in HKPage/HKWirelessHDSDK/lib, and add it.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="figure">
<img alt="_images/project-setting-1.png" src="_images/project-setting-1.png" />
</div>
<p>After adding the HKWirelessHDSDK folder into your project and adding libHKWirelessHD.a, the project navigator will look like as below:</p>
<div class="figure">
<img alt="_images/project-setting-2.png" src="_images/project-setting-2.png" />
</div>
</div>
<div class="section" id="add-swift-bridging-header">
<h3>Add Swift Bridging Header<a class="headerlink" href="#add-swift-bridging-header" title="Permalink to this headline">¶</a></h3>
<p>HKWirelessHD SDK has been written in C++ and Objective-C. Therefore, when you use the SDK in Swift, you should include Swift Bridging Header in your project. To do this:</p>
<ol class="arabic simple">
<li>Go to Project Setting &gt; Build Setting &gt; Swift Compiler - Code Generation &gt; Objective-C Bridging Header</li>
</ol>
<div class="figure">
<img alt="_images/project-setting-3.png" src="_images/project-setting-3.png" />
</div>
<ol class="arabic" start="2">
<li><p class="first">Add [My-Project-Name]/[My-Project-Name]-Bridging-Header.h</p>
<blockquote>
<div><ul class="simple">
<li>In our example, it looks like : HKPage/HKPage-Bridging-Header.h</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Add the following lines in the header file.</p>
</li>
</ol>
<div class="highlight-swift"><div class="highlight"><pre><span class="p">#</span><span class="kd">import</span> <span class="s">&quot;HKWControlHandler.h&quot;</span>
<span class="p">#</span><span class="kd">import</span> <span class="s">&quot;HKWPlayerEventHandlerSingleton.h&quot;</span>
<span class="p">#</span><span class="kd">import</span> <span class="s">&quot;HKWDeviceEventHandlerSingleton.h&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="add-lstdc-as-linker-flag">
<h3>Add -lstdc++ as linker flag<a class="headerlink" href="#add-lstdc-as-linker-flag" title="Permalink to this headline">¶</a></h3>
<ul>
<li><dl class="first docutils">
<dt>Project Setting &gt; Your Targets &gt; Build Settings &gt; Linking &gt; Other Linder Flags</dt>
<dd><ul class="first last simple">
<li>Add “-lstdc++” in the text field</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="figure">
<img alt="_images/project-setting-4.png" src="_images/project-setting-4.png" />
</div>
</div>
</div>
<div class="section" id="using-hkwirelesshd-api">
<h2>Using HKWirelessHD API<a class="headerlink" href="#using-hkwirelesshd-api" title="Permalink to this headline">¶</a></h2>
<p>All APIs can be accessed through a singleton object of HKWControlHandler. Only you have to do is obtain the singleton instance of HKWControlHandler and use it to invoke whatever API you want to call.</p>
<p>The code examples in this document are in Swift. and the function definition is in Objective-C. The APIs are compatible both in Swift and Objective-C.</p>
<div class="section" id="initialize-hkwirelesshd-control-handler-and-start-the-wireless-audio">
<h3>Initialize HKWirelessHD Control Handler and start the Wireless Audio<a class="headerlink" href="#initialize-hkwirelesshd-control-handler-and-start-the-wireless-audio" title="Permalink to this headline">¶</a></h3>
<div class="highlight-swift"><div class="highlight"><pre><span class="c1">// Obtain the HKWControlHandler singleton instance</span>
<span class="kd">let</span> <span class="nv">g_HWControlHandler</span><span class="p">:</span> <span class="n">HKWControlHandler</span> <span class="p">=</span> <span class="n">HKWControlHandler</span><span class="p">.</span><span class="n">sharedInstance</span><span class="p">()</span>

<span class="c1">// Initialize the HKWControlHandler and start wireless audio</span>
<span class="n">HKWControlHandler</span><span class="p">.</span><span class="n">sharedInstance</span><span class="p">().</span><span class="n">initializeHKWirelessController</span> <span class="p">(</span><span class="n">licenseKey</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">initializeHKWirelessController()</span></code> takes a string of license key as parameter. Every developer who signs up for Harman developer community will receive a license key. If you have not received it yet, then just use the license key specified in the sample code for temporary use until your own license key is available.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">initializeHKWirelessController()</span></code> is a blocking call. It waits until the call successfully initializes the wireless audio network. If the phone device does not belong to a Wi-Fi network or if there is other app already using HKWirelessHD and running on the same device, then it will wait until the other app releases the HKWControlHandler. It would be nice to present a dialog to user before calling <code class="docutils literal"><span class="pre">initializeHKWirelessController()</span></code> to notice that the app will wait until HKWirelessHD network is available.</p>
</div>
</div>
<div class="section" id="discovery-and-refreshing-of-available-speakers-in-the-wi-fi-network">
<h3>Discovery and refreshing of available speakers in the Wi-Fi network<a class="headerlink" href="#discovery-and-refreshing-of-available-speakers-in-the-wi-fi-network" title="Permalink to this headline">¶</a></h3>
<p>The status of speakers can be changed dynamically over time. And, whenever a speaker is turned off or on, the list of speakers available in the network should be refreshed. Especially, when you select speakers for playback, the speaker list and the status of each speaker should be updated with the latest information.</p>
<p>Basically, whenever there is any change on the speaker side, the newest information of the speaker is available from the device list maintained by HKWControlHandler. But, the update is initiated by speakers, and there is some latency until the latest information is reflected to the HKWControlHandler. So, if you need the latest information without latency, you would better refresh the speaker status regularly.</p>
<p>To force to update the status of speakers regularly, the SDK provides a pair of convenient APIs to refresh device status. One of the use cases of these functions are to present a screen of speaker list to user and show the current speaker information in real-time manner.</p>
<p>To start checking the status of devices regularly, use <code class="docutils literal"><span class="pre">startRefreshDeviceInfo()</span></code>. To stop checking the status regularly, use <code class="docutils literal"><span class="pre">stopRefreshDeviceInfo()</span></code>.</p>
<div class="highlight-swift"><div class="highlight"><pre><span class="c1">// start to refresh devices ...</span>
<span class="n">HKWControlHandler</span><span class="p">.</span><span class="n">sharedInstance</span><span class="p">().</span><span class="n">startRefreshDeviceInfo</span><span class="p">()</span>

<span class="c1">// stop to refresh devices</span>
<span class="n">HKWControlHandler</span><span class="p">.</span><span class="n">sharedInstance</span><span class="p">().</span><span class="n">stopRefreshDeviceInfo</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">startRefreshDeviceInfo()</span></code> will refresh and update every 2 seconds the status of the devices in the current Wi-Fi network.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even without calling <code class="docutils literal"><span class="pre">startRefreshDeviceInfo()</span></code>, the speaker information will be updated whenever the information is updated on speaker side, but there is some latency until the newest information is reflected to HKWControlHandler.</p>
</div>
</div>
<div class="section" id="speakers-and-groups">
<h3>Speakers and Groups<a class="headerlink" href="#speakers-and-groups" title="Permalink to this headline">¶</a></h3>
<p>There are two ways to choose speakers to play on – one is to select a speaker from the global list of speakers maintained by the internal data structure, and the other is to select a speaker with a group (or room) index and the index of the speaker within the group. Note that in this document, the term group and room are used as the same meaning, that is, a set of speakers.</p>
<div class="section" id="selecting-a-speaker-individually">
<h4>Selecting a speaker individually<a class="headerlink" href="#selecting-a-speaker-individually" title="Permalink to this headline">¶</a></h4>
<p><strong>Select a speaker in the global list</strong></p>
<div class="highlight-swift"><div class="highlight"><pre><span class="c1">// get the number of available speakers</span>
<span class="kd">let</span> <span class="nv">deviceCount</span> <span class="p">=</span> <span class="n">HKWControlHandler</span><span class="p">.</span><span class="n">sharedInstance</span><span class="p">().</span><span class="n">getDeviceCount</span><span class="p">()</span>

<span class="c1">// get the info of the first devices in the list</span>
<span class="kd">var</span> <span class="nv">index</span> <span class="p">=</span> <span class="mi">0</span>
<span class="kd">let</span> <span class="nv">deviceInfo</span> <span class="p">=</span> <span class="n">HKWControlHandler</span><span class="p">.</span><span class="n">sharedInstance</span><span class="p">().</span><span class="n">getDeviceInfoByIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Retrieve DeviceInfo with deviceId</strong></p>
<p>If you know the deviceId of a speaker, then you can retrieve the device information using <code class="docutils literal"><span class="pre">findDeviceFromList()</span></code>.</p>
<div class="highlight-swift"><div class="highlight"><pre>// get the number of available speakers
var deviceId : ClongLong = …
let deviceInfo = HKWControlHandler.sharedInstance().findDeviceFromList(deviceId)
</pre></div>
</div>
</div>
<div class="section" id="selecting-a-speaker-from-a-group">
<h4>Selecting a speaker from a group<a class="headerlink" href="#selecting-a-speaker-from-a-group" title="Permalink to this headline">¶</a></h4>
<p>A <strong>Group</strong> is defined by the group information of each speaker. That is, if a speaker has a group where it belongs to, then the group has the speaker as a member. So, as an example, if speaker A and speaker B have the same group of Group C, then Group C will have speaker A and speaker B as members. If speaker A changes the group as ‘Group D’, then Group C will have only speaker B, and Group D will have speaker A as a member.</p>
<p><strong>Get the number of groups available in the network</strong></p>
<div class="highlight-swift"><div class="highlight"><pre><span class="c1">// get the number of groups</span>
<span class="kd">var</span> <span class="nv">groupCount</span> <span class="p">=</span> <span class="n">HKWControlHandler</span><span class="p">.</span><span class="n">sharedInstance</span><span class="p">().</span><span class="n">getGroupCount</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Get the number of devices in a group</strong></p>
<div class="highlight-swift"><div class="highlight"><pre><span class="c1">// get the number of devices in the first group</span>
<span class="kd">var</span> <span class="nv">groupIndex</span> <span class="p">=</span> <span class="mi">0</span>
<span class="kd">var</span> <span class="nv">deviceCount</span> <span class="p">=</span> <span class="n">HKWControlHandler</span><span class="p">.</span><span class="n">sharedInstance</span><span class="p">().</span><span class="n">getDeviceCountInGroupIndex</span><span class="p">(</span><span class="n">groupIndex</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieve-the-information-of-a-device">
<h4>Retrieve the information of a device<a class="headerlink" href="#retrieve-the-information-of-a-device" title="Permalink to this headline">¶</a></h4>
<p>You can retrieve the information of a device (speaker) using DeviceInfo object. Please refer to DeviceInfo.h. The following is the list of information that DeviceInfo provides:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="10%" />
<col width="40%" />
<col width="28%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Type in Swift</th>
<th class="head">Description</th>
<th class="head">Fixed/Variable</th>
<th class="head">Set by API</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>deviceId</td>
<td>CLongLong</td>
<td>the unique ID of the speaker</td>
<td>Fixed (in manufacturing)</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>deviceName</td>
<td>String</td>
<td>the name of the speaker</td>
<td>Variable</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>groupId</td>
<td>CLongLong</td>
<td>the unique ID of the group that the speaker belongs to</td>
<td>Variable (set when a group is created)</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>groupName</td>
<td>String</td>
<td>the name of the group that the speaker belongs to</td>
<td>Variable (set when a group is created)</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>modelName</td>
<td>String</td>
<td>the name of the Model of the speaker</td>
<td>Fixed (in manufacturing)</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>ipAddress</td>
<td>String</td>
<td>the IP address as String</td>
<td>Fixed (when network setup)</td>
<td>No</td>
</tr>
<tr class="row-even"><td>port</td>
<td>String</td>
<td>the port number</td>
<td>Fixed (when network setup)</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>macAddress</td>
<td>String</td>
<td>the mac address as String</td>
<td>Fixed (in manufacturing)</td>
<td>No</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>Int</td>
<td>the volume level value (0 to 50)</td>
<td>Variable</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>active</td>
<td>Bool</td>
<td>indicates if added to the current playback session</td>
<td>Variable</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>wifiSignalStrength</td>
<td>Int</td>
<td>Wi-Fi strength in dBm scale, -100 (low) to 0 (high)</td>
<td>Variable</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>role</td>
<td>Int</td>
<td>the role definition (stereo or 5.1 channel)</td>
<td>Variable</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>version</td>
<td>String</td>
<td>the firmware version number as String</td>
<td>Fixed (when firmware update)</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>balance</td>
<td>Int</td>
<td>the balance value in stereo mode. -6 to 6, 0 is neutral</td>
<td>Variable</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>isPlaying</td>
<td>Bool</td>
<td>indicates whether the speaker is playing or not</td>
<td>Variable</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>channelType</td>
<td>Int</td>
<td>the channel type: 1 is stereo.</td>
<td>Variable</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>isMaster</td>
<td>Bool</td>
<td>indicates if it is the master in stereo or group mode</td>
<td>Variable</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>As shown in the table above, some of the attributes can be set by the APIs. And some attributes change during the runtime, so the app should keep the latest value of the attributes by calling corresponding APIs or by callback functions.</p>
<p>The following is an example of retrieving some of attributes of a speaker information.</p>
<div class="highlight-swift"><div class="highlight"><pre>let deviceInfo: DeviceInfo = HKWControlHandler.sharedInstance().getDeviceInfoFromTable(groupIndex, deviceIndex:deviceIndex)

println(&quot;deviceName: \(deviceInfo.deviceName&quot;)
println(&quot;groupName: \(deviceInfo.groupName&quot;)
println(&quot;volume: \(deviceInfo.volume&quot;)
println(&quot;deviceId: \(deviceInfo.deviceId&quot;)
println(&quot;deviceActive: \(deviceInfo.active&quot;)
println(&quot;deviceModel: \(deviceInfo.modelName&quot;)
...
</pre></div>
</div>
</div>
<div class="section" id="change-speaker-name-and-group-name">
<h4>Change speaker name and group name<a class="headerlink" href="#change-speaker-name-and-group-name" title="Permalink to this headline">¶</a></h4>
<p><strong>Change speaker name</strong></p>
<p>Use <code class="docutils literal"><span class="pre">setDeviceName()</span></code> to change the speaker name. Note that you cannot set the device name by setting “deviceName” property value directly. The property is read-only.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting Started Guide (iOS)</a><ul>
<li><a class="reference internal" href="#project-setup-with-hkwireless-normal-version">Project Setup with HKWireless (normal version)</a><ul>
<li><a class="reference internal" href="#include-hkwirelesshdsdk-into-your-project">Include HKWirelessHDSDK into your project</a></li>
<li><a class="reference internal" href="#add-libhkwirelesshd-a-as-link-binary">Add libHKWirelessHD.a as link binary</a></li>
<li><a class="reference internal" href="#add-swift-bridging-header">Add Swift Bridging Header</a></li>
<li><a class="reference internal" href="#add-lstdc-as-linker-flag">Add -lstdc++ as linker flag</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-hkwirelesshd-api">Using HKWirelessHD API</a><ul>
<li><a class="reference internal" href="#initialize-hkwirelesshd-control-handler-and-start-the-wireless-audio">Initialize HKWirelessHD Control Handler and start the Wireless Audio</a></li>
<li><a class="reference internal" href="#discovery-and-refreshing-of-available-speakers-in-the-wi-fi-network">Discovery and refreshing of available speakers in the Wi-Fi network</a></li>
<li><a class="reference internal" href="#speakers-and-groups">Speakers and Groups</a><ul>
<li><a class="reference internal" href="#selecting-a-speaker-individually">Selecting a speaker individually</a></li>
<li><a class="reference internal" href="#selecting-a-speaker-from-a-group">Selecting a speaker from a group</a></li>
<li><a class="reference internal" href="#retrieve-the-information-of-a-device">Retrieve the information of a device</a></li>
<li><a class="reference internal" href="#change-speaker-name-and-group-name">Change speaker name and group name</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="sdk-overview.html"
                        title="previous chapter">Overview of HKWirelessHD SDK (iOS)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="architecture-overview.html"
                        title="next chapter">Architecture Overview</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/getting-started-iOS.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="architecture-overview.html" title="Architecture Overview"
             >next</a> |</li>
        <li class="right" >
          <a href="sdk-overview.html" title="Overview of HKWirelessHD SDK (iOS)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Harman Developer 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Harman International.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>